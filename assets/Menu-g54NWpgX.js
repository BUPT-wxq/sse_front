var C=(r,t,i)=>new Promise((w,g)=>{var x=n=>{try{f(i.next(n))}catch(_){g(_)}},D=n=>{try{f(i.throw(n))}catch(_){g(_)}},f=n=>n.done?w(n.value):Promise.resolve(n.value).then(x,D);f((i=i.apply(r,t)).next())});import{g as E}from"./index-25bmcfen.js";import{u as U}from"./useTable-VPpETMx8.js";import{I as q,h as c,c as F}from"./index-X2ggTGKV.js";import{_ as J}from"./Table.vue_vue_type_script_lang-nltHcxje.js";import"./el-tag-w40geAFS.js";import{_ as W}from"./Search.vue_vue_type_script_setup_true_lang-cXquVXAq.js";import{_ as X}from"./ContentWrap.vue_vue_type_script_setup_true_lang-uiiaNYQP.js";import{_ as z}from"./Write.vue_vue_type_script_setup_true_lang-9dKTS2wI.js";import{_ as G}from"./Detail.vue_vue_type_script_setup_true_lang-r6spZis8.js";import{_ as H}from"./Dialog.vue_vue_type_style_index_0_lang-zrDhBAvH.js";import{y as K}from"./element-plus-etLzNv3_.js";import{l as Q,J as j,O as o,P as d,a as s,m as b,p as Y,R as p,u as l,q as Z,V as R,U as $,W as N,X as S,y as ee}from"./vue-chunks-o87s7J8u.js";import"./el-checkbox-w40geAFS.js";import"./el-popper-w40geAFS.js";import"./el-pagination-w40geAFS.js";import"./el-image-viewer-w40geAFS.js";import"./el-card-w40geAFS.js";import"./el-radio-button-Zc3MqnhQ.js";import"./el-dropdown-item-w40geAFS.js";import"./el-drawer-w40geAFS.js";import"./index-YsKSMprJ.js";import"./Form-8Qwz70Oy.js";import"./el-col-w40geAFS.js";import"./el-input-number-w40geAFS.js";import"./el-divider-w40geAFS.js";import"./el-tree-w40geAFS.js";import"./InputPassword-x7Lq5KXM.js";import"./style.css_vue_type_style_index_0_src_true_lang-WxKRW3Hw.js";import"./wang-editor-GuMHOkf8.js";import"./JsonEditor.vue_vue_type_script_setup_true_lang-juUd3AWC.js";import"./IconPicker-ha1q0C78.js";import"./useForm-yvcpLEyU.js";import"./useIcon-SiP2aKSb.js";import"./useValidator-pbHS2vyS.js";import"./AddButtonPermission.vue_vue_type_script_setup_true_lang-rAlcJ89k.js";import"./Descriptions-pG1EAbRJ.js";const te={class:"mb-10px"};function T(r){return typeof r=="function"||Object.prototype.toString.call(r)==="[object Object]"&&!ee(r)}const Pe=Q({__name:"Menu",setup(r){const{t}=F(),{tableRegister:i,tableState:w,tableMethods:g}=U({fetchDataApi:()=>C(this,null,function*(){return{list:(yield E()).data.list||[]}})}),{dataList:x,loading:D}=w,{getList:f}=g,n=j([{field:"index",label:t("userDemo.index"),type:"index"},{field:"meta.title",label:t("menu.menuName"),slots:{default:a=>{const e=a.row.meta.title;return o(d,null,[e])}}},{field:"meta.icon",label:t("menu.icon"),slots:{default:a=>{const e=a.row.meta.icon;return e?o(d,null,[o(q,{icon:e},null)]):null}}},{field:"component",label:t("menu.component"),slots:{default:a=>{const e=a.row.component;return o(d,null,[e==="#"?"顶级目录":e==="##"?"子目录":e])}}},{field:"path",label:t("menu.path")},{field:"status",label:t("menu.status"),slots:{default:a=>o(d,null,[o(K,{type:a.row.status===0?"danger":"success"},{default:()=>[a.row.status===1?t("userDemo.enable"):t("userDemo.disable")]})])}},{field:"action",label:t("userDemo.action"),width:240,slots:{default:a=>{let e,u,V;const L=a.row;return o(d,null,[o(c,{type:"primary",onClick:()=>I(L,"edit")},T(e=t("exampleDemo.edit"))?e:{default:()=>[e]}),o(c,{type:"success",onClick:()=>I(L,"detail")},T(u=t("exampleDemo.detail"))?u:{default:()=>[u]}),o(c,{type:"danger"},T(V=t("exampleDemo.del"))?V:{default:()=>[V]})])}}}]),_=j([{field:"meta.title",label:t("menu.menuName"),component:"Input"}]),M=s({}),A=a=>{M.value=a,f()},m=s(!1),k=s(""),y=s(),v=s(""),B=s(),h=s(!1),I=(a,e)=>{k.value=t(e==="edit"?"exampleDemo.edit":"exampleDemo.detail"),v.value=e,y.value=a,m.value=!0},O=()=>{k.value=t("exampleDemo.add"),y.value=void 0,m.value=!0,v.value=""},P=()=>C(this,null,function*(){const a=l(B),e=yield a==null?void 0:a.submit();e&&(h.value=!0,setTimeout(()=>{h.value=!1,m.value=!1},1e3))});return(a,e)=>(b(),Y(d,null,[o(l(X),null,{default:p(()=>[o(l(W),{schema:_,onReset:A,onSearch:A},null,8,["schema"]),Z("div",te,[o(l(c),{type:"primary",onClick:O},{default:p(()=>[R($(l(t)("exampleDemo.add")),1)]),_:1})]),o(l(J),{columns:n,"default-expand-all":"","node-key":"id",data:l(x),loading:l(D),onRegister:l(i)},null,8,["columns","data","loading","onRegister"])]),_:1}),o(l(H),{modelValue:m.value,"onUpdate:modelValue":e[1]||(e[1]=u=>m.value=u),title:k.value},{footer:p(()=>[v.value!=="detail"?(b(),N(l(c),{key:0,type:"primary",loading:h.value,onClick:P},{default:p(()=>[R($(l(t)("exampleDemo.save")),1)]),_:1},8,["loading"])):S("",!0),o(l(c),{onClick:e[0]||(e[0]=u=>m.value=!1)},{default:p(()=>[R($(l(t)("dialogDemo.close")),1)]),_:1})]),default:p(()=>[v.value!=="detail"?(b(),N(z,{key:0,ref_key:"writeRef",ref:B,"current-row":y.value},null,8,["current-row"])):S("",!0),v.value==="detail"?(b(),N(G,{key:1,"current-row":y.value},null,8,["current-row"])):S("",!0)]),_:1},8,["modelValue","title"])],64))}});export{Pe as default};
